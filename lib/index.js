// Generated by CoffeeScript 1.9.1
var ReactCompiler, react;

react = require('react-tools/main');

module.exports = ReactCompiler = (function() {
  ReactCompiler.prototype.brunchPlugin = true;

  ReactCompiler.prototype.type = 'javascript';

  ReactCompiler.prototype.extension = 'jsx';

  ReactCompiler.prototype.pattern = /\.jsx/;

  function ReactCompiler(config) {
    var ref, ref1, ref2, ref3, ref4;
    this.config = config;
    this.harmony = ((ref = this.config) != null ? (ref1 = ref.plugins) != null ? (ref2 = ref1.react) != null ? ref2.harmony : void 0 : void 0 : void 0) === true;
    this.options = ((ref3 = this.config) != null ? (ref4 = ref3.plugins) != null ? ref4.react : void 0 : void 0) || {};
  }

  ReactCompiler.prototype.compile = function(params, callback) {
    var err, output, source;
    source = params.data;
    try {
      output = react.transformWithDetails(source, this.options);
    } catch (_error) {
      err = _error;
      console.log("ERROR", err);
      console.dir(output);
      return callback(err.toString());
    }
    return callback(null, {
      data: output.code
    });
  };

  return ReactCompiler;

})();
